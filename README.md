
<img src="https://capsule-render.vercel.app/api?type=waving&color=0E4C92&height=300&section=header&text=C-Radar&fontSize=70&fontColor=FFFFFF&animation=fadeIn&width=1200" width="1200" />


## <div align="center" style="font-size: 70px; color: #000080; animation: glow 1.5s infinite;">  ğŸ” Catch your Log, ì´íƒˆì ë°©ì§€ì™€ ì´ìƒ íƒì§€ë¥¼ í•œ ë²ˆì— ğŸ”</div>

   <p align="center">
      <img src="https://github.com/user-attachments/assets/f4c1d2a7-eeb7-4e11-a74a-f098196c6a94" width=50%>
   </p>


<br>

## ğŸ“ Contents
- [1ï¸âƒ£ Overview](#1%EF%B8%8Fâƒ£-overview)
- [2ï¸âƒ£ Contributors](#2%EF%B8%8Fâƒ£-contributors)
- [3ï¸âƒ£ Environment Settings](#3%EF%B8%8Fâƒ£-environment-settings)
- [4ï¸âƒ£ ERD](#4%EF%B8%8Fâƒ£-erd)
- [5ï¸âƒ£ Trouble Shooting](#5%EF%B8%8Fâƒ£-trouble-shooting)
- [6ï¸âƒ£ Retrospective](#6%EF%B8%8Fâƒ£-retrospective)


<br>

<br>

## 1ï¸âƒ£ Overview
ì´ í”„ë¡œì íŠ¸ëŠ” **ì‹œìŠ¤í…œ ë¡œê·¸ë¥¼ ë¶„ì„**í•˜ì—¬ ì´íƒˆì íƒì§€ì™€ ì´ìƒ í–‰ë™ì„ ì‹ë³„í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.  
**INFO, WARN, ERROR, FATAL** ë¡œê·¸ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš©ì í–‰ë™ê³¼ ì—ëŸ¬ ë°œìƒ íŒ¨í„´ì„ ì‹œê°í™”í•˜ê³ ,  
ì„œë¹„ìŠ¤ì˜ í’ˆì§ˆ í–¥ìƒì„ ìœ„í•œ í†µì°°ì„ ì œê³µí•©ë‹ˆë‹¤. 

### ğŸ’¡ Background

>**ê³ ê° ì´íƒˆ**ì—ëŠ” í¬ê²Œ **ìë°œì  ì´íƒˆ**ê³¼ **ë¹„ìë°œì  ì´íƒˆ**ì˜ ë‘ ê°€ì§€ ìœ í˜•ì´ ìˆìŠµë‹ˆë‹¤.
>
>### ìë°œì  ì´íƒˆ
>
>ê³ ê°ì˜ ì„ í˜¸ë„ ë³€í™”ì™€ ê´€ë ¨ì´ ìˆëŠ” ì´íƒˆ ìœ í˜• 
>
>### ë¹„ìë°œì  ì´íƒˆ
>
>ê¸°ìˆ  ë˜ëŠ” ê²°ì œ ë¬¸ì œ, ìì—°ì¬í•´ ë“± ê³ ê°ì´ í†µì œí•  ìˆ˜ ì—†ëŠ” ë¬¸ì œ
>
><br>
>ì¶œì²˜: https://www.ibm.com/kr-ko/think/topics/customer-churn
<br>

### â— Customer Needs

![image](https://github.com/user-attachments/assets/00577483-2a32-495b-a709-8a2e49d75fe8)


### ğŸ“Š Core Features
1. **ì„œë¹„ìŠ¤ ì´íƒˆì ë¶„ì„**  
   - ì‚¬ìš© ì¤‘: INFO ë¡œê·¸ ë° ë°˜ë³µ WARN ë¡œê·¸ íƒì§€  
   - ì‚¬ìš© ì¢…ë£Œ: ë¡œê·¸ ë©”ì‹œì§€ì—ì„œ `exit` ë˜ëŠ” `background` í‚¤ì›Œë“œ ë¶„ì„  

2. **ì´ìƒ íƒì§€**  
   - ë¡œê·¸ ë ˆë²¨(INFO, WARN, ERROR, FATAL) ê¸°ë°˜ì˜ ì´ìƒ í–‰ë™ ì‹ë³„  

3. **ë¡œê·¸ ë°ì´í„°ë¥¼ í™œìš©í•œ "ëŒ€ì‹œë³´ë“œ"ë¡œ ì‹œê°í™” ì œê³µ**

   <a href="service/demo.md">
     <button style="font-size: 100px;">ğŸ’¥ ë°ëª¨ ì‹œì—°</button>
   </a>


</br>


<br>

## 2ï¸âƒ£ Contributors

|<img src="https://avatars.githubusercontent.com/u/80048007?v=4" width="220" height="200"/>|<img src="https://avatars.githubusercontent.com/u/60309978?v=4" width="220" height="200"/>|<img src="https://avatars.githubusercontent.com/u/193213283?v=4" width="220" height="200"/>|<img src="https://avatars.githubusercontent.com/u/115103394?v=4" width="220" height="200"/>|
|:-:|:-:|:-:|:-:|
|ë°•ì˜ì§„<br/>[@DoomchitYJ](https://github.com/DoomchitYJ)|ë°•ì •í˜¸<br/>[@Jeongho427](https://github.com/Jeongho427)|ë°•ì§„í˜„<br/>[@jinhyunpark929](https://github.com/jinhyunpark929)|ì´í˜„ì •<br/>[@nanahj](https://github.com/nanahj)|

<br>

## 3ï¸âƒ£ Environment Settings

### ğŸ›  Skills

**Tech Stack**

<div>
<img src="https://img.shields.io/badge/mysql-4479A1?style=for-the-badge&logo=mysql&logoColor=white"> 
<img src="https://img.shields.io/badge/linux-FCC624?style=for-the-badge&logo=linux&logoColor=black"> 
<img src="https://img.shields.io/badge/dbeaver-846d5e?style=for-the-badge&logo=dbeaver&logoColor=white"> 
<img src="https://img.shields.io/badge/elasticsearch-3db9ac?style=for-the-badge&logo=elasticsearch&logoColor=white"> 
<img src="https://img.shields.io/badge/kibana-f04e98?style=for-the-badge&logo=kibana&logoColor=white">   
</div>

<br>

**Co-work Stack**

<div>
<img src="https://img.shields.io/badge/notion-000000?style=for-the-badge&logo=notion&logoColor=white"> 
<img src="https://img.shields.io/badge/github-303a50?style=for-the-badge&logo=github&logoColor=white">
<img src="https://img.shields.io/badge/slack-e01e5a?style=for-the-badge&logo=slack&logoColor=white">
</div>

<br>

### ğŸ–¥ï¸ Architecture

![image](https://github.com/user-attachments/assets/9f48e40b-36ac-48e6-83b8-909d26a72de4)

<br>

### ğŸ›  Configuration

**1. MySQL Connector ì„¤ì¹˜**

https://downloads.mysql.com/archives/c-j/

![image](https://github.com/user-attachments/assets/c28f7618-24f1-40ba-844c-96160eb55c35)

WindowsëŠ” Operating System: ì„ íƒ í•­ëª©ì— ì—†ë‹¤. Platform Independentë¡œ ì„ íƒí•œë‹¤.

"Platform Independent (Architecture Independent), Compressed TAR Archive"ë¡œ ë‹¤ìš´ë¡œë“œí•˜ê³  ì›í•˜ëŠ” ê²½ë¡œì— ì••ì¶•ì„ í•´ì œí•œë‹¤.

**2. .conf íŒŒì¼ ìˆ˜ì •**

JDBC ì½”ë“œë¥¼ ì…ë ¥í•œë‹¤.

**a. input**
```
input {
  jdbc {
    jdbc_driver_library => "C:/02.devEnv/mysql-connector-java/mysql-connector-java-8.0.18.jar"
    jdbc_driver_class => "com.mysql.cj.jdbc.Driver"
    jdbc_connection_string => "jdbc:mysql://IPì£¼ì†Œ/DBì´ë¦„?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Seoul"
    jdbc_user => "ìœ ì €ì´ë¦„"
    jdbc_password => "ë¹„ë°€ë²ˆí˜¸"
    schedule => "* * * * *" # 1ë¶„ ì£¼ê¸°ë¡œ ì—…ë°ì´íŠ¸
    
    # SQL_LAST_VALUEë¥¼ ì¶”ì í•  ì»¬ëŸ¼ ì„¤ì •
    use_column_value => true
    tracking_column => "created_at"  # MySQLì—ì„œ ì§€ì •í•œ columnëª…ìœ¼ë¡œ ë³€ê²½
    tracking_column_type => "timestamp"
    
    # ë§ˆì§€ë§‰ ì‹¤í–‰ ì‹œê°„ ì €ì¥ ìœ„ì¹˜
    last_run_metadata_path => "C:/02.devEnv/ELK/logstash-7.11.1/last_run_metadata.txt"
    
    # ì¦ë¶„ ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•œ SQL ì¿¼ë¦¬
    # statement => "SELECT * FROM log WHERE timestamp > :sql_last_value ORDER BY timestamp ASC"
    statement => "SELECT *, UNIX_TIMESTAMP(created_at) AS unix_ts_in_secs FROM log WHERE (UNIX_TIMESTAMP(created_at) > :sql_last_value AND created_at < NOW()) ORDER BY created_at ASC"
  }
}
```

<br>

>**ğŸ§¨ ì°¸ê³ : schedule í‘œí˜„ì‹**
>
>```
>* * * * *
>```
>ê° ìœ„ì¹˜ëŠ” íŠ¹ì • ì‹œê°„ ë‹¨ìœ„ë¥¼ ë‚˜íƒ€ë‚´ë©°, ì™¼ìª½ì—ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì•„ë˜ì™€ ê°™ì´ í•´ì„ëœë‹¤.
>
> ë¶„ (Minutes): 0-59
>
> ì‹œê°„ (Hours): 0-23 (24ì‹œê°„ í˜•ì‹)
>
> ì¼ (Day of Month): 1-31
>
> ì›” (Month): 1-12
>
> ìš”ì¼ (Day of Week): 0-6 (0ì€ ì¼ìš”ì¼)
>
><br>
>
> **ì™€ì¼ë“œì¹´ë“œì™€ ê°’ ì„¤ëª…**
>
> *: ëª¨ë“  ê°’ (ì˜ˆ: ëª¨ë“  ë¶„, ëª¨ë“  ì‹œê°„ ë“±).
>
> */n: ë§¤ n ë‹¨ìœ„ (ì˜ˆ: */15ëŠ” 15ë¶„ ê°„ê²©).
>
> a-b: ë²”ìœ„ (ì˜ˆ: 9-17ì€ 9ì‹œë¶€í„° 17ì‹œê¹Œì§€).
>
> a,b: íŠ¹ì • ê°’ë“¤ (ì˜ˆ: 1,15ëŠ” 1ì¼ê³¼ 15ì¼).
>
> ?: íŠ¹ì • ê°’ ìƒëµ (ì£¼ë¡œ ì¼(Day of Month)ê³¼ ìš”ì¼(Day of Week) ì¤‘ í•˜ë‚˜ë¥¼ ìƒëµí•  ë•Œ ì‚¬ìš©).
<br>

**b. filter**

```
filter {
  mutate {
    remove_field => [ "@timestamp" ]
  }
}
```

ì´ë²¤íŠ¸ê°€ Logstashì— ì˜í•´ ìˆ˜ì§‘ë˜ì—ˆì„ ë•Œì˜ ì‹œê°„ì¸ **@timestamp** í•„ë“œëŠ” ì œê±°í•˜ì˜€ë‹¤.

<br>

**c. output**

```
output {
  elasticsearch {
    hosts => ["localhost:9200"]
    index => "ì¸ë±ìŠ¤ëª…"
    document_id => "%{id}"
  }
  stdout { codec => json_lines }
}
```


<br>

## 4ï¸âƒ£ ERD
### MySQL
<div style="display: flex; justify-content: center; gap: 200px;">
  <img src="https://github.com/user-attachments/assets/a19248dc-a26a-4fe0-8a80-cb89726b119a" alt="Image 1" width="165">
  <img src="https://github.com/user-attachments/assets/eaea307a-1785-4971-8485-deeba36077ca" alt="Image 2" width="400">
</div>

<br>

### Elasticsearch
![image](https://github.com/user-attachments/assets/7867c7cd-d689-4411-8e31-cbb30c805c03)

<br>

## 5ï¸âƒ£ Trouble Shooting

**âš” MySQL ë°ì´í„°ê°€ ElasticSearchì— ë“¤ì–´ê°€ì§€ ì•ŠëŠ” ë¬¸ì œ**

**ë°œìƒí•œ ì—ëŸ¬ ë¡œê·¸:**
```
[2025-01-21T15:14:00,207][ERROR][logstash.inputs.jdbc     ][main][1c1466bdc1156c09cdaa6367548cadf70059fe13237f40acbcf85fddd30f859c] Unable to connect to database. Tried 1 times {:error_message=>"Java::JavaSql::SQLException: The server time zone value 'KST' is unrecognized or represents more than one time zone. You must configure either the server or JDBC driver (via the serverTimezone configuration property) to use a more specifc time zone value if you want to utilize time zone support."}
```

**í•´ê²°ë°©ì•ˆ:** íƒ€ì„ì¡´(Asia/Seoul)ì„ êµ¬ì²´ì ìœ¼ë¡œ ì§€ì •í•œë‹¤.

```
    jdbc_connection_string => "jdbc:mysql://192.168.1.77:3306/cradar?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Seoul"
```

<br><br>

**âš” MySQLì˜ ì¤‘ë³µ ë°ì´í„°ê°€ ElasticSearchì— ì£¼ê¸°ë§ˆë‹¤ ì‚½ì…ë˜ëŠ” ë¬¸ì œ**

**í•´ê²°ë°©ì•ˆ:** logstashì˜ .conf íŒŒì¼ output íŒŒíŠ¸ì— ```document_id => "%{id}"```ë¥¼ ì‚½ì…í•œë‹¤.

>
>```document_id => "%{id}"```ì˜ ì˜ë¯¸: 
>Logstashì—ì„œ Elasticsearchì— ë°ì´í„°ë¥¼ ì‚½ì…í•  ë•Œ, Logstashì˜ ì´ë²¤íŠ¸ì—ì„œ id í•„ë“œì— í•´ë‹¹í•˜ëŠ” ê°’ì„ **Elasticsearch ë¬¸ì„œì˜ IDë¡œ ì‚¬ìš©**í•˜ê² ë‹¤ëŠ” ëœ»ì´ë‹¤.
>
>ì´ë ‡ê²Œ ì„¤ì •í•˜ë©´, Logstashê°€ MySQLì—ì„œ ê°€ì ¸ì˜¨ ê° ë°ì´í„° í•­ëª©ì— í¬í•¨ëœ id ê°’ì„ Elasticsearch ë¬¸ì„œì˜ ê³ ìœ  IDë¡œ ì§€ì •í•˜ë©° **ê°™ì€ IDë¥¼ ê°€ì§„ ë¬¸ì„œê°€ ì´ë¯¸ ì¡´ì¬í•˜ë©´ í•´ë‹¹ ë¬¸ì„œë¥¼ ì—…ë°ì´íŠ¸**í•œë‹¤.
>
>ë”°ë¼ì„œ, document_id => "%{id}"ë¥¼ ì„¤ì •í•˜ë©´, ë™ì¼í•œ idë¥¼ ê°€ì§„ ë°ì´í„°ê°€ ìƒˆë¡œ ë“¤ì–´ì˜¤ë”ë¼ë„ **ì´ë¯¸ Elasticsearchì— ì¡´ì¬í•˜ëŠ” ë¬¸ì„œê°€ ë®ì–´ì“°ì—¬ì§€ê±°ë‚˜ ì—…ë°ì´íŠ¸**ëœë‹¤.

**ì˜ˆì‹œ:**

```java
output {
  elasticsearch {
    hosts => ["localhost:9200"]
    index => "cradar"
    document_id => "%{id}"
  }
  stdout { codec => json_lines }
}
```


## 6ï¸âƒ£ Retrospective

### í”„ë¡œì íŠ¸ ê²½í—˜ ê°œê´„ ì •ë¦¬

1. **ê°€ì¹˜ ì œì•ˆ(Value Proposition)ì˜ ì¤‘ìš”ì„±**  
   - í”„ë¡œì íŠ¸ë¥¼ í†µí•´ ì‹œì¥ ì í•©ì„±ì„ ê²€ì¦í•˜ëŠ” ê³¼ì •ì—ì„œ ëª…í™•í•œ ê°€ì¹˜ ì œì•ˆì´ í•„ìˆ˜ì ì„ì„ ì²´ê°í•¨.

2. **ë°ì´í„° ì‹œê°í™”ì™€ ì‚¬ìš©ì ì¤‘ì‹¬ UX ì„¤ê³„**  
   - ë‹¨ìˆœí•œ ë°ì´í„° ì „ë‹¬ì„ ë„˜ì–´, ì˜ë¯¸ë¥¼ ëª…í™•íˆ ì „ë‹¬í•˜ëŠ” ë°ì´í„° ì‹œê°í™”ì˜ ì¤‘ìš”ì„±ì„ ì¸ì‹.  
   - ë°ì´í„° íë¦„ê³¼ ìƒê´€ê´€ê³„ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ í‘œí˜„í•˜ê¸° ìœ„í•œ ì‹œê°í™” ì„¤ê³„ì™€ ì‚¬ìš©ì ì„ í˜¸ë„ ë°˜ì˜ì˜ í•„ìš”ì„± ì²´ê°.  
   - ë°ì´í„° ì‹œê°í™”ê°€ ë°ì´í„° ë¶„ì„ì˜ í•µì‹¬ì„ì„ ë‹¤ì‹œ ê¹¨ë‹«ê²Œ ë¨.

3. **ì‹¤ì „ì ì¸ ë¡œê·¸ ë°ì´í„° í™œìš©**  
   - ê°€ìƒ ë¡œê·¸ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì‹œë‚˜ë¦¬ì˜¤ ì„¤ê³„ë¡œ ëª°ì…ê° ìƒìŠ¹.  
   - Logstashë¥¼ í™œìš©í•´ ë°ì´í„°ë² ì´ìŠ¤ì™€ Elasticsearchë¥¼ ì—°ê²°í•˜ëŠ” íŒŒì´í”„ë¼ì¸ êµ¬ì¶• ê²½í—˜.  
   - ë°ì´í„° ë¶„ì„ ê²°ê³¼ë¥¼ ì‹œê°í™”í•˜ì—¬ ìœ ì˜ë¯¸í•œ ì¸ì‚¬ì´íŠ¸ë¥¼ ë„ì¶œí•˜ê³ , í–¥í›„ í”„ë¡œì íŠ¸ì— ì ìš© ê°€ëŠ¥ì„±ì„ í™•ì¸.

4. **ê¸°ìˆ ì  ì—­ëŸ‰ ê°•í™”**  
   - Logstashì˜ í•„ìš”ì„±ê³¼ ê¸°ëŠ¥ì„ ì‹¬ë„ ìˆê²Œ ì´í•´í•˜ë©° í™œìš© ëŠ¥ë ¥ì„ í–¥ìƒì‹œí‚´.  
   - ë³µì¡í•˜ê³  ë„ì „ì ì¸ í”„ë¡œì íŠ¸ì— ì°¸ì—¬í•  ìˆ˜ ìˆëŠ” ê¸°ìˆ ì  ìì‹ ê°ì„ ì–»ìŒ.


<img src="https://capsule-render.vercel.app/api?type=waving&color=0E4C92&height=150&section=footer" width="1000" />
